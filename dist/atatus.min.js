/*! AtatusJs - v1.3.0 - 2013-11-19
* https://github.com/fizerkhan/atatusjs
* Copyright (c) 2013 MindscapeHQ, Atatus; Licensed MIT */
(function(e,t){"use strict";if(e){var n=e.event.add;e.event.add=function(r,o,i,a,u){var c;return i.handler?(c=i.handler,i.handler=t.wrap(i.handler)):(c=i,i=t.wrap(i)),i.guid=c.guid?c.guid:c.guid=e.guid++,n.call(this,r,o,i,a,u)};var r=e.fn.ready;e.fn.ready=function(e){return r.call(this,t.wrap(e))};var o=e.ajax;e.ajax=function(n){for(var r,i=["complete","error","success"];r=i.pop();)e.isFunction(n[r])&&(n[r]=t.wrap(n[r]));try{return o.call(this,n)}catch(a){throw t.report(a),a}}}})(window.jQuery,window.TraceKit),function(e,t){function n(e,t,n,r){A.send(r||e.type,{status:t.status,statusText:t.statusText,type:n.type,url:n.url,contentType:n.contentType})}function r(t){e.console&&e.console.log&&y&&e.console.log(t)}function o(){return f&&""!==f?!0:(r("Atatus API key has not been configured, make sure you call Atatus.init(yourApiKey)"),!1)}function i(e,t){var n,r={};for(n in e)r[n]=e[n];for(n in t)r[n]=t[n];return r}function a(e,t){for(var n=0;e.length>n;n++)t.call(null,n,e[n])}function u(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function c(){var t=document.documentElement,n=document.getElementsByTagName("body")[0],r=e.innerWidth||t.clientWidth||n.clientWidth,o=e.innerHeight||t.clientHeight||n.clientHeight;return{width:r,height:o}}function s(t,n){var r=[],o={};t.stack&&t.stack.length&&a(t.stack,function(e,t){r.push({LineNumber:t.line,ClassName:"line "+t.line+", column "+t.column,FileName:t.url,MethodName:t.func||"[anonymous]"})}),e.location.search&&e.location.search.length>1&&a(e.location.search.substring(1).split("&"),function(e,t){var n=t.split("=");n&&2===n.length&&(o[decodeURIComponent(n[0])]=n[1])}),u(n)&&(n=C);var i=e.screen||{width:c().width,height:c().height,colorDepth:8},s={OccurredOn:new Date,Details:{Error:{ClassName:t.name,Message:t.message||"Script error",StackTrace:r},Environment:{UtcOffset:(new Date).getTimezoneOffset()/-60,"User-Language":navigator.userLanguage,"Document-Mode":document.documentMode,"Browser-Width":c().width,"Browser-Height":c().height,"Screen-Width":i.width,"Screen-Height":i.height,"Color-Depth":i.colorDepth,Browser:navigator.appCodeName,"Browser-Name":navigator.appName,"Browser-Version":navigator.appVersion,Platform:navigator.platform},Client:{Name:"atatus-js",Version:"1.2.1"},UserCustomData:n,Request:{Url:document.location.href,QueryString:o,Headers:{"User-Agent":navigator.userAgent,Referer:document.referrer,Host:document.domain}},Version:p||"Not supplied"}};g&&(s.Details.User=g),d(s)}function d(e){if(o()){r("Sending exception data to Atatus:",e);var t="https://gcdc2013-atatus.appspot.com/api/entries?apikey="+encodeURIComponent(f);h(t,JSON.stringify(e))}}function l(t,n){var o;return o=new e.XMLHttpRequest,"withCredentials"in o?o.open(t,n,!0):e.XDomainRequest&&(o=new e.XDomainRequest,o.open(t,n)),o.onload=function(){r("logged error to Atatus")},o.onerror=function(){r("failed to log error to Atatus")},o}function h(e,t){var n=l("POST",e);return n?(n.send(t),void 0):(r("CORS not supported"),void 0)}var f,g,p,m,w=TraceKit.noConflict(),v=e.Atatus,y=!1,C={};t&&(m=t(document));var A={noConflict:function(){return e.Atatus=v,A},init:function(e,t,n){return f=e,w.remoteFetching=!1,C=n,t&&t.debugMode&&(y=t.debugMode),A},withCustomData:function(e){return C=e,A},attach:function(){return o()?(w.report.subscribe(s),m&&m.ajaxError(n),A):void 0},detach:function(){return w.report.unsubscribe(s),m&&m.unbind("ajaxError",n),A},send:function(e,t){try{s(w.computeStackTrace(e),i(C,t))}catch(n){if(e!==n)throw n}return A},setUser:function(e){return g={Identifier:e},A},setVersion:function(e){return p=e,A}};e.Atatus=A}(window,window.jQuery);